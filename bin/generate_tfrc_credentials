#!/bin/bash

# Check if TERRAFORM_CLOUD_TOKEN is set
if [ -z "$TERRAFORM_CLOUD_TOKEN" ]; then
    echo "Error: TERRAFORM_CLOUD_TOKEN environment variable is not set."
    exit 1
fi

# JSON content
json_content="{\"credentials\": {\"app.terraform.io\": {\"token\": \"$TERRAFORM_CLOUD_TOKEN\"}}}"

# Write JSON content to file
echo "$json_content" > credentials.tfrc.json

echo "Credentials file generated successfully."
